<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #e6ffe6; text-align: center; padding: 20px; margin: 0; }
        .content-box { background-color: #d4edda; padding: 20px; margin: 10px auto; border-radius: 10px; max-width: 90%; box-sizing: border-box; }
        .option { background-color: #ff9999; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 10px; display: inline-block; }
        .option:hover { background-color: #ff6666; }
        .input-field { padding: 10px; margin: 10px; width: 80%; max-width: 300px; }
        button { background-color: #ff9999; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background-color: #ff6666; }
        .thank-you { background-color: #00cc00; color: white; padding: 10px; margin: 10px; border-radius: 5px; display: none; }
        .error { background-color: #ff4d4d; color: white; padding: 10px; margin: 10px; border-radius: 5px; display: none; }
        .back { background-color: #ff9999; padding: 10px; border-radius: 5px; cursor: pointer; display: inline-block; margin-top: 15px; }
        .hidden { display: none; }
        @media (max-width: 768px) {
            .content-box { padding: 10px; }
            .option, button { font-size: 0.9rem; padding: 8px 15px; }
            .input-field { font-size: 0.9rem; padding: 8px; }
            .thank-you, .error { font-size: 0.9rem; padding: 8px; }
        }
    </style>
</head>
<body>
    <div class="content-box">
        <h1>Feedback Time! 📩</h1>
        <p>Got feedback? Choose your way! 😄</p>
        <div class="option" onclick="showDirectOptions()">Send Directly</div>
        <div class="option" onclick="showEmailOptions()">Send via Email</div>
        <div class="back" onclick="window.location.href='index.html'">Back ⬅️</div>
    </div>

    <div class="content-box hidden" id="emailOptions">
        <h2>Email Your Feedback 📧</h2>
        <input type="text" class="input-field" id="gmail" placeholder="Your Gmail Address">
        <input type="text" class="input-field" id="emailSuggestion" placeholder="Your Suggestion">
        <button onclick="submitEmail()">Submit</button>
        <div class="thank-you" id="emailThankYou">Thank you for your feedback! 🎉</div>
        <div class="error" id="emailError">Incorrect Gmail provided! 😕</div>
        <div class="back" onclick="window.location.href='index.html'">Back ⬅️</div>
    </div>

    <div class="content-box hidden" id="directOptions">
        <h2>Send Directly 😄</h2>
        <input type="text" class="input-field" id="directName" placeholder="Your Name">
        <input type="text" class="input-field" id="directSuggestion" placeholder="Your Suggestion">
        <button onclick="submitDirect()">Submit</button>
        <button class="thank-you" id="thankYouButton" onclick="checkClicks()">Thank You!</button>
        <button class="back" onclick="window.location.href='index.html'">Back ⬅️</button>
        <div class="content-box hidden" id="storageView">
            <h2>Hidden Suggestions 📝</h2>
            <p>Click 'Thank You!' 4 times to view stored suggestions and trivia scores! 🔐</p>
            <div id="storedSuggestions"></div>
            <div id="storedTriviaScores"></div>
            <div class="back" onclick="window.location.href='index.html'">Back ⬅️</div>
        </div>
    </div>

    <script>
        let clickCount = 0;
        let clickTimeout;

        function showDirectOptions() {
            document.getElementById("emailOptions").classList.add("hidden");
            document.getElementById("directOptions").classList.remove("hidden");
        }

        function showEmailOptions() {
            document.getElementById("directOptions").classList.add("hidden");
            document.getElementById("emailOptions").classList.remove("hidden");
        }

        function submitEmail() {
            const gmail = document.getElementById("gmail").value;
            const suggestion = document.getElementById("emailSuggestion").value;
            if (gmail && suggestion) {
                if (gmail.toLowerCase().endsWith("@gmail.com")) {
                    document.getElementById("emailThankYou").style.display = "block";
                    setTimeout(() => document.getElementById("emailThankYou").style.display = "none", 2000);
                } else {
                    document.getElementById("emailError").style.display = "block";
                    setTimeout(() => document.getElementById("emailError").style.display = "none", 2000);
                }
                document.getElementById("gmail").value = "";
                document.getElementById("emailSuggestion").value = "";
            } else {
                alert("Please enter both Gmail and suggestion! 😕");
            }
        }

        function submitDirect() {
            const name = document.getElementById("directName").value;
            const suggestion = document.getElementById("directSuggestion").value;
            if (name && suggestion) {
                const suggestions = JSON.parse(localStorage.getItem("directSuggestions") || "[]");
                suggestions.push({ name, suggestion, timestamp: new Date().toLocaleString() });
                localStorage.setItem("directSuggestions", JSON.stringify(suggestions));
                document.getElementById("directName").value = "";
                document.getElementById("directSuggestion").value = "";
                alert("Suggestion stored locally! 🎉");
            } else {
                alert("Please enter both name and suggestion! 😕");
            }
        }

        function checkClicks() {
            clickCount++;
            if (clickCount >= 4) {
                document.getElementById("storageView").classList.remove("hidden");
                loadSuggestions();
                loadTriviaScores();
                clickCount = 0;
            }
        }

        function loadSuggestions() {
            const suggestions = JSON.parse(localStorage.getItem("directSuggestions") || "[]");
            const list = document.getElementById("storedSuggestions");
            list.innerHTML = suggestions.map(s => `<p>${s.name} (${s.timestamp}): ${s.suggestion}</p>`).join("");
        }

        function loadTriviaScores() {
            const scores = JSON.parse(localStorage.getItem("triviaScores") || "[]");
            const list = document.getElementById("storedTriviaScores");
            list.innerHTML = scores.map(s => `<p>Score: ${s.score}/7 on ${s.date}</p>`).join("");
        }
    </script>
</body>
</html>
